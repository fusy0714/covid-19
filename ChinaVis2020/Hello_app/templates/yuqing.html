<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据可视化demo</title>
    <link href="../static/styles/common.css?random=120100" rel="stylesheet">
    <script src="../static/scripts/Plugin/jquery-3.3.1.min.js"></script>
    <script src="../static/scripts/Plugin/echarts.min.js"></script>
    <script src="../static/scripts/common.js"></script>
{#    <script src="../static/scripts/yuqing.js?random=123500"></script>#}
</head>
<body>
<!--顶部-->
<header class="header left">
  <div class="left nav">
      <ul>
          <li><a href="{% url 'home' %}">主界面</a> </li>
          <li><a href="{% url 'timezone' %}">时空态势</a> </li>
          <li class="nav_active"><a href="{% url 'yuqing' %}">舆情分析</a> </li>
          <!-- <li class="nav_active"><i class="nav_4"></i><a href="chronic.html">慢病病人列表</a> </li> -->
          </ul>
  </div>
    <div class="header_center left" style="position:relative">
  
        <h2><strong>新冠疫情可视分析系统</strong></h2>

    </div>
    <div class="right nav text_right">
        <ul>

        </ul>
    </div>

</header>
<!--内容部分-->
<div class="con left" style="width:50%;">
    <!--统计分析图-->
    <div class="div_any">
        <div class="left div_any01" style="width:100%;">
            <div class="div_any_child" style="width:98%;position:relative;height: 420px;">
                <div class="div_any_title"><img src="../static/images/title_13.png">舆情词云</div>
                <div id="histogramChart1"  style="width: 45%;display: inline-block;height: 400px;margin-top: 15px;"></div>
                <div id="lineChart1"  style="width: 52%;height: 66%;display: inline-block;"></div>
            </div>
        </div>
        <div class="left div_any01" style="width:200%;">
          <div class="div_any_child" style="height: 420px;">
              <div class="div_any_title"><img src="../static/images/title_14.png">情感倾向</div>
              <p id="histogramChart2" class="p_chart" style="height: 400px;"></p>
          </div>
        </div>
      </div>
    </div>
</div>
<div class="con right" style="width:50%;">
  <div class="div_any">
      <div class="left div_any01" style="width:100%;">
          <div class="div_any_child" style="width:98%;position:relative;height: 420px;">
              <div class="div_any_title"><img src="../static/images/title_17.png">热词词频</div>
              <div id="histogramChart3"  style="width: 45%;display: inline-block;height: 400px;margin-top: 15px;"></div>
              <div id="lineChart2"  style="width: 52%;height: 90%;display: inline-block;"></div>
          </div>
      </div>
  </div>
</div>
</body>

<script>
    //情感分析
   var histogramChart2 = echarts.init(document.getElementById('histogramChart2'));
   histogramChart2.setOption({
       color: ['rgb(194,53,49)', "#FFCC99", 'rgb(83,122,149)'],
       tooltip : {
           trigger: 'axis',
           axisPointer : {            // 坐标轴指示器，坐标轴触发有效
               type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
           },
           formatter: function(params) {//这里就是控制显示的样式
                var relVal = params[0].name;
                var value = 0;
                for (var i = 0, l = params.length; i < l; i++) {
                    value += params[i].value;
                }
                for (var i = 0, l = params.length; i < l; i++) {
              //marker 就是带颜色的小圆圈 seriesName x轴名称  value  y轴值 后面就是计算百分比
                    relVal += '<br/>'+ params[i].marker + params[i].seriesName + ' : '+ parseFloat(params[i].value) +' (' + (100 *
                        parseFloat(params[i].value) / parseFloat(value)).toFixed(2) + "%)";
                }
               return relVal;
           },
       },
       legend: {
           data:{{ legend_data|safe }},
           textStyle: {
               color: '#fff'
           }
       },
       grid: {
           left: '3%',
           right: '4%',
           bottom: '10%',
           containLabel: true
       },
       xAxis : [
           {
               type : 'category',
               data:{{ x_data|safe }},
               //data : ['周一','周二','周三','周四','周五','周六','周日']
               axisLine:{
                   show: false,//不显示坐标轴线
               },
               axisLabel : {
                   textStyle: {
                       color: '#fff'
                   }
               }
           }
       ],
       yAxis : [
           {
               type : 'value',
               //max: 5,
               axisLine:{
                   show: false,//不显示坐标轴线
               },
               axisLabel : {
                   textStyle: {
                       color: '#fff'
                   }
               },
               // y軸的分割線顏色
              splitLine: {
                show: true,
                lineStyle: {
                  color: "rgb(133,133,133)",
                  width: 1,
                }
              }
           }
       ],
       series:{{ series|safe }},
       dataZoom: [
           {   // 这个dataZoom组件，默认控制x轴。
               type: 'slider', // 这个 dataZoom 组件是 slider 型 dataZoom 组件
               start: 20,      // 左边在 10% 的位置。
               end: 100         // 右边在 60% 的位置。
           },
           {   // 这个dataZoom组件，默认控制x轴。
               type: 'inside', // 这个 dataZoom 组件是 inside 型 dataZoom 组件
               start: 20,      // 左边在 10% 的位置。
               end: 100         // 右边在 60% 的位置。
           }
        ],
   })
</script>
</html>
